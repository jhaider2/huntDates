<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Draw Tracker - Big Game Draw Deadlines</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <a href="#" id="user-icon-link" class="login-icon" title="Login">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
            <circle cx="12" cy="7" r="4"></circle>
        </svg>
    </a>

    <div class="container">
        <header>
            <h1>Draw Tracker</h1>
            <p class="subtitle">Western Big Game Draw Application Deadlines & Results</p>
            <p class="disclaimer">Always verify deadlines with official state agencies before applying</p>
        </header>

        <div class="filters">
            <div class="filter-group">
                <label for="state-filter">Filter by State:</label>
                <select id="state-filter">
                    <option value="all">All States</option>
                    <option value="arizona">Arizona (Non-Resident)</option>
                    <option value="colorado">Colorado (Non-Resident)</option>
                    <option value="idaho">Idaho (Non-Resident)</option>
                    <option value="montana">Montana (Non-Resident)</option>
                    <option value="nevada">Nevada (Non-Resident)</option>
                    <option value="newmexico">New Mexico (Non-Resident)</option>
                    <option value="utah">Utah (Resident)</option>
                    <option value="wyoming">Wyoming (Non-Resident)</option>
                </select>
            </div>
            <div class="filter-group">
                <label for="species-filter">Filter by Species:</label>
                <select id="species-filter">
                    <option value="all">All Species</option>
                    <option value="Elk">Elk</option>
                    <option value="Deer">Deer</option>
                    <option value="Moose">Moose</option>
                    <option value="Antelope">Antelope</option>
                    <option value="Black Bear">Black Bear</option>
                    <option value="Bighorn Sheep-Rocky Mtn">Bighorn Sheep-Rocky Mtn</option>
                    <option value="Bighorn Sheep-Desert">Bighorn Sheep-Desert</option>
                    <option value="Oryx">Oryx</option>
                </select>
            </div>
            <div class="filter-group">
                <label for="sort-filter">Sort by:</label>
                <select id="sort-filter">
                    <option value="deadline">Next Deadline</option>
                    <option value="state">State</option>
                </select>
            </div>
            <div class="filter-group checkbox-group">
                <label>
                    <input type="checkbox" id="hide-expired">
                    Hide Expired Applications
                </label>
            </div>
        </div>

        <div class="legend">
            <div class="legend-item">
                <span class="legend-dot green"></span>
                <span>Open (30+ days)</span>
            </div>
            <div class="legend-item">
                <span class="legend-dot yellow"></span>
                <span>Closing Soon (within 30 days)</span>
            </div>
            <div class="legend-item">
                <span class="legend-dot purple"></span>
                <span>Awaiting Results (deadline closed)</span>
            </div>
            <div class="legend-item">
                <span class="legend-dot red"></span>
                <span>Expired</span>
            </div>
        </div>

        <div id="deadlines-container">
            <!-- Deadline cards will be populated here -->
        </div>

        <footer>
            <p>Email <a href="mailto:jordan@drawtracker.com">jordan@drawtracker.com</a> with any feedback</p>
            <p class="copyright">&copy; 2026 Draw Tracker. All rights reserved.</p>
        </footer>
    </div>

    <script src="supabase-config.js"></script>
    <script src="script.js"></script>
    <script>
        // Check auth status and update user icon link
        async function updateUserIcon() {
            const supabase = window.supabaseClient;
            const { data: { user } } = await supabase.auth.getUser();
            const userIconLink = document.getElementById('user-icon-link');

            if (user) {
                userIconLink.href = 'settings.html';
                userIconLink.title = 'Settings';
            } else {
                userIconLink.href = 'login.html';
                userIconLink.title = 'Login';
            }
        }
        updateUserIcon();
    </script>
</body>
</html>
